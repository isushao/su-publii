<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>如何构建一个安全的Web应用 - 𝓼𝓾.𝓼𝓱𝓪𝓸.blog</title><meta name="description" content="且夫水之积也不厚，则其负大舟也无力。"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://isushao.github.io/su-publii/ce-shi.html"><link rel="alternate" type="application/atom+xml" href="https://isushao.github.io/su-publii/feed.xml"><link rel="alternate" type="application/json" href="https://isushao.github.io/su-publii/feed.json"><link rel="stylesheet" href="https://isushao.github.io/su-publii/assets/css/style.css?v=4128e7e1a641a287245dedc222b18c79"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://isushao.github.io/su-publii/ce-shi.html"},"headline":"如何构建一个安全的Web应用","datePublished":"2022-08-04T10:22","dateModified":"2022-08-13T10:18","description":"且夫水之积也不厚，则其负大舟也无力。","author":{"@type":"Person","name":"Roc Su","url":"https://isushao.github.io/su-publii/authors/sushaopeng/"},"publisher":{"@type":"Organization","name":"Roc Su"}}</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://isushao.github.io/su-publii/">𝓼𝓾.𝓼𝓱𝓪𝓸.blog</a></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2022-08-04T10:22">八月 4, 2022</time></div><h1>如何构建一个安全的Web应用</h1><div class="post__meta post__meta--author"><a href="https://isushao.github.io/su-publii/authors/sushaopeng/" class="feed__author">Roc Su</a></div></div></header></div><div class="wrapper post__entry"><blockquote><p>且夫水之积也不厚，则其负大舟也无力。</p><p>覆杯水于坳堂之上，则芥为之舟；置杯焉则胶，水浅而舟大也。风之积也不厚，则其负大翼也无力。故九万里，则风斯在下矣，而后乃今培风；背负青天，而莫之夭阏者，而后乃今将图南。</p><p class="align-right">庄子  -《逍遥游》</p></blockquote><p>何以积水如洪，载得大舟；积风若飓，负得大翼。对于一个应用来说，搭建好基础服务是至关重要的。</p><h3 class="md-end-block md-heading"><span class="md-plain md-expand">安全</span></h3><p class="md-end-block md-p"><span class="md-plain">建设易于配置的访问控制机制。</span></p><ul class="ul-list" data-mark="-"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">与数据模型集成。</span></p><ul class="ul-list" data-mark="-"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">实体 CRUD 操作和查看/修改特定实体属性的权限。例如，用户可以查看文档，但不能创建、更新或删除文档，并且可以查看除 </span><span class="md-pair-s" spellcheck="false"><code>amount</code></span><span class="md-plain"> 之外的所有文档属性。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">行级访问控制，限制对单个实体实例的访问。例如，用户只能查看在其部门中创建的文档。</span></p></li></ul></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">与 UI 集成。</span></p><ul class="ul-list" data-mark="-"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">打开用户界面和查看主菜单项的权限。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">如果可视化组件（例如，文本组件）绑定至实体属性，根据当前用户对该属性的权限会自动将可视化组件变为只读或隐藏。如果用户被拒绝使用实体的 CRUD 操作，则也会禁用相应的表格操作。</span></p></li></ul></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">使用带注解的 Java 接口声明式的定义角色和权限。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">运行时定义角色和许可，并保存至数据库。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">一组用户界面，用于查看角色和权限、为用户分配角色、创建运行时角色。</span></p></li></ul><h4 class="md-end-block md-heading"><span class="md-plain">资源角色</span></h4><p class="md-end-block md-p"><span class="md-plain">资源角色赋予用户对系统中特定对象和操作的权限：对实体的 CRUD 操作权限、实体属性权限、UI 界面权限等。</span></p><h5 class="md-end-block md-heading"><span class="md-plain">资源策略</span></h5><ul class="ul-list" data-mark="-"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">实体策略指定对实体的 CRUD 操作权限。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">实体属性策略指定对实体属性的操作权限。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">界面策略指定 UI 界面的许可权限。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">菜单策略指定 UI 主菜单项的许可权限。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">特殊策略用于定义任何其他功能的权限，如特定API访问权限。</span></p></li></ul><h4 class="md-end-block md-heading"><span class="md-plain">行级角色</span></h4><p class="md-end-block md-p"><span class="md-plain">行级角色支持对特定数据行的访问限制，即，限制对实体实例的访问。</span></p><h4 class="md-end-block md-heading"><span class="md-plain">认证授权</span></h4><p class="md-end-block md-p"><span class="md-plain">认证是验证与系统交互的用户或进程的身份的过程。例如，系统可以通过用户名和密码对用户进行认证。对已经认证的用户，系统可以执行授权，检查用户对特定资源的权限。</span></p><h5 class="md-end-block md-heading"><span class="md-plain">模式</span></h5><ul class="ul-list" data-mark="-"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">授权码模式</span></p></li></ul><p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="C:\Users\isush\AppData\Roaming\Typora\typora-user-images\image-20220802111732570.png"><img loading="lazy" src="file:///C:\Users\isush\AppData\Roaming\Typora\typora-user-images\image-20220802111732570.png?lastModify=1660353813" data-is-external-image="true" alt="image-20220802111732570" data-local-refresh="true"></span></p><ul class="ul-list" data-mark="-"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">隐式授予模式</span></p></li></ul><p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="C:\Users\isush\AppData\Roaming\Typora\typora-user-images\image-20220802112102705.png"><img loading="lazy" src="file:///C:\Users\isush\AppData\Roaming\Typora\typora-user-images\image-20220802112102705.png?lastModify=1660353813" data-is-external-image="true" alt="image-20220802112102705" data-local-refresh="true"></span></p><ul class="ul-list" data-mark="-"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">资源所有者密码模式</span></p></li></ul><p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="C:\Users\isush\AppData\Roaming\Typora\typora-user-images\image-20220802112039838.png"><img loading="lazy" src="file:///C:\Users\isush\AppData\Roaming\Typora\typora-user-images\image-20220802112039838.png?lastModify=1660353813" data-is-external-image="true" alt="image-20220802112039838" data-local-refresh="true"></span></p><ul class="ul-list" data-mark="-"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">客户端凭证模式</span></p></li></ul><p class="md-end-block md-p"><span class="md-image md-img-loaded" data-src="C:\Users\isush\AppData\Roaming\Typora\typora-user-images\image-20220802112143245.png"><img loading="lazy" src="file:///C:\Users\isush\AppData\Roaming\Typora\typora-user-images\image-20220802112143245.png?lastModify=1660353813" data-is-external-image="true" alt="image-20220802112143245" data-local-refresh="true"></span></p><p class="md-end-block md-p"> </p><h4 class="md-end-block md-heading"><span class="md-plain">防暴力破解</span></h4><p class="md-end-block md-p"><span class="md-plain">如果启用了保护，则在多次尝试登录失败后，在一段时间内阻止相同用户名和 IP 地址再次登录。</span></p><h4 class="md-end-block md-heading"><span class="md-plain">LDAP 认证</span></h4><p class="md-end-block md-p"><span class="md-plain">Spring Security 会在每次认证成功后创建标准的 </span><span class="md-pair-s" spellcheck="false"><code>LdapUserDetails</code></span><span class="md-plain"> 对象，并将对象保留在内存中，而不是从数据库读取 </span><span class="md-pair-s" spellcheck="false"><code>User</code></span><span class="md-plain"> 实体。</span></p><h4 class="md-end-block md-heading"><span class="md-plain">数据加密、解密</span></h4><p class="md-end-block md-p"><span class="md-plain">身份证、手机号等敏感数据进行加密存储、传输。</span></p><h3 class="md-end-block md-heading"><span class="md-plain">REST API</span></h3><p class="md-end-block md-p"><span class="md-plain">通用的 REST API，可以无需编写后端 REST 控制器即可处理数据模型实体和业务服务。能自动开放下列功能接口：</span></p><ul class="ul-list" data-mark="-"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">实体增删查改操作。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">调用注册的服务方法。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">上传和下载文件。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">获取数据模型的信息。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">获取当前用户和用户权限的信息。</span></p></li></ul><h3 class="md-end-block md-heading"><span class="md-plain">组件</span></h3><p class="md-end-block md-p"><span class="md-plain">可插拔，丰富功能，具有规范文档。</span></p><h4 class="md-end-block md-heading"><span class="md-plain">搜索</span></h4><p class="md-end-block md-p"><span class="md-plain">Elasticsearch中间件，提供全局搜索的能力。</span></p><h4 class="md-end-block md-heading"><span class="md-plain">通知</span></h4><p class="md-end-block md-p"><span class="md-plain">信息类通知</span></p><p class="md-end-block md-p"><span class="md-plain">系统事件通知</span></p><h4 class="md-end-block md-heading"><span class="md-plain">OCR</span></h4><p class="md-end-block md-p"><span class="md-plain">图像文字识别</span></p><p class="md-end-block md-p"><span class="md-meta-i-c md-link"><a href="https://github.com/clovaai/donut"><span class="md-plain">Donut</span></a></span></p><h4 class="md-end-block md-heading"><span class="md-plain">文件管理</span></h4><p class="md-end-block md-p"><span class="md-plain">对象存储，minio starter组件</span></p><h4 class="md-end-block md-heading"><span class="md-plain">日志</span></h4><p class="md-end-block md-p"><span class="md-plain">数据库实体日志</span></p><p class="md-end-block md-p"><span class="md-plain">系统事件日志</span></p><h4 class="md-end-block md-heading"><span class="md-plain">缓存（NOSQL)</span></h4><p class="md-end-block md-p"><span class="md-plain">计算成本比较大的数据使用缓存。</span></p><h5 class="md-end-block md-heading"><span class="md-plain">Redis</span></h5><h5 class="md-end-block md-heading"><span class="md-plain">MongoDB</span></h5><h4 class="md-end-block md-heading"><span class="md-plain">限流+熔断</span></h4><p class="md-end-block md-p"><span class="md-plain">访问超过服务负载时限流熔断，不至于服务崩溃，友好提示。</span></p><p class="md-end-block md-p"> </p><h2 class="md-end-block md-heading"><span class="md-plain">拓展</span></h2><h3 class="md-end-block md-heading"><span class="md-plain">分布式数据（高并发）</span></h3><h4 class="md-end-block md-heading"><span class="md-plain">可扩展性</span></h4><p class="md-end-block md-p"><span class="md-plain">如果你的数据量、读取负载、写入负载超出单台机器的处理能力，可以将负载分散到多台计算机上。</span></p><h4 class="md-end-block md-heading"><span class="md-plain">容错/高可用性</span></h4><p class="md-end-block md-p"><span class="md-plain">如果你的应用需要在单台机器（或多台机器，网络或整个数据中心）出现故障的情况下仍然能继续工作，则可使用多台机器，以提供冗余。一台故障时，另一台可以接管。</span></p><h4 class="md-end-block md-heading"><span class="md-plain">延迟</span></h4><p class="md-end-block md-p"><span class="md-plain">如果在世界各地都有用户，你也许会考虑在全球范围部署多个服务器，从而每个用户可以从地理上最近的数据中心获取服务，避免了等待网络数据包穿越半个世界。</span></p><h4 class="md-end-block md-heading"><span class="md-plain">分布式问题</span></h4><p class="md-end-block md-p"><span class="md-plain">分布式系统中可能发生的各种问题，包括：</span></p><ul class="ul-list" data-mark="-"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">当您尝试通过网络发送数据包时，数据包可能会丢失或任意延迟。同样，答复可能会丢失或延迟，所以如果你没有得到答复，你不知道消息是否通过。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">节点的时钟可能会与其他节点显著不同步（尽管您尽最大努力设置NTP），它可能会突然跳转或跳回，依靠它是很危险的，因为您很可能没有好的测量你的时钟的错误间隔。</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">一个进程可能会在其执行的任何时候暂停一段相当长的时间（可能是因为世界上的垃圾收集器），被其他节点宣告死亡，然后再次复活，却没有意识到它被暂停了。</span></p></li></ul><h4 class="md-end-block md-heading"><span class="md-plain">一致性与共识</span></h4><p class="md-end-block md-p"><span class="md-plain">数据库主从复制提供最终一致性功能。但收敛（convergence）操作之前可能会发生读不一致的情况。例如写入一个值立刻读取，并不能保证看到刚写入的值，因为读请求可能会被路由到另一个副本上。</span></p><h5 class="md-end-block md-heading"><span class="md-plain">线性一致性</span></h5><p class="md-end-block md-p"><span class="md-plain">使系统看起来好像只有一个数据副本。</span></p><h5 class="md-end-block md-heading md-focus"><span class="md-plain">共识算法</span></h5><p> </p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on 八月 13, 2022</p><div class="post__share"></div><div class="post__bio bio"><div class="bio__info"><h3 class="bio__name"><a href="https://isushao.github.io/su-publii/authors/sushaopeng/" rel="author">Roc Su</a></h3><p>分享总是美好的</p></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-next"><a href="https://isushao.github.io/su-publii/mongoxue-xi-xin-lu.html" class="post__nav-link" rel="next"><span>Next</span> Mongo学习路程 </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://isushao.github.io/su-publii/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav></main><footer class="footer"><div class="footer__copyright">Powered by Publii</div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://isushao.github.io/su-publii/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script defer="defer" src="https://isushao.github.io/su-publii/assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>